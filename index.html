<html>
<head>
	<title>Home</title>
	<script type="text/javascript" src="./jquery.js"></script>
</head>
<body>
	<div class="page">
		<div class="menu">
			<a class="getPage2" href="#">Load the page2</a>
			<br />
			<a class="getPage3" href="#">SSE Page</a>
		</div>
		<div id="content">

		</div>
	</div>

	<script type="text/javascript">
	$(document).ready(function() {
		$(".getPage2").click(function () {
			$("#content").load("/page2.html", null, function (argument) {
				$("#content .title").html("The page 2 has been loaded :)")
			})
			return false;
		});
		$(".getPage3").click(function () {
			source = new EventSource("/sse.html")
			source.onmessage = function (e) {
				console.log(e)
			}
			source.addEventListener('message', function(e) {
				$("#content").html($("#content").html() + "<br />" + e.data)
			}, false);

			source.addEventListener('open', function(e) {
				$("#content").html($("#content").html() + "<br /><strong>Opened</strong>")
			}, false);

			source.addEventListener('error', function(e) {
				if (e.readyState == EventSource.CLOSED) {
					$("#content").html($("#content").html() + "<br /><strong>Closed</strong>")
				}
			}, false);
			return false;
		});
	});
	</script>

</body>
</html>